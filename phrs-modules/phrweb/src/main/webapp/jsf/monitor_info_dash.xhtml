<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.prime.com.tr/ui"
                template="/templates/template_ui.xhtml">

<ui:define name="head">


    <style type="text/css">
        .table.innertable td {
            border: 0;
        }
    </style>
    <ui:insert name="head"/>
</ui:define>


<ui:define name="content">

<p:fieldset legend="Monitor Personal Health Information">

<h:form>

    <h:panelGroup style="width:300px">
        <p:growl id="msgs" showDetail="true"/>

        <h:panelGroup rendered="#{monmgtBean.showFormType ne 'ROLEGROUP_MEDICAL'}">
            <h:inputHidden value="#{monmgtBean.selectedOwnerUri}"/>
        </h:panelGroup>

        <h:panelGroup>
            <h:outputLabel value="Display information about:"/>
            <h:selectOneRadio id="field_3_input"
                              required="true" requiredMessage="What kind of Information?"
                              layout="pageDirection"
                              value="#{monmgtBean.selectedLocalResourceType}">
                <!--f:selectItem itemLabel="Please Select Information type" noSelectionOption="true"
                itemValue=""/-->
                <f:selectItems
                        value="#{monmgtBean.modelFormLocalResources}"
                        var="lv" itemLabel="#{lv.label}" itemValue="#{lv.id}"/>
            </h:selectOneRadio>

        </h:panelGroup>

        <h:panelGroup rendered="#{monmgtBean.showFormType eq 'ROLEGROUP_MEDICAL'}">
            <h:selectOneMenu id="field_2_input"
                             required="true" requiredMessage="Please select a Patient"
                             layout="pageDirection"
                             value="#{monmgtBean.selectedOwnerUri}" style="font-size: 12pt;">

                <f:selectItem itemLabel="Please select a Patient" noSelectionOption="true"
                              itemValue=""/>
                <f:selectItems
                        value="#{monmgtBean.modelFormUserList}"
                        var="lv" itemLabel="#{lv.label}" itemValue="#{lv.id}"/>
            </h:selectOneMenu>


            <p:commandButton value="Display"
                             title="Display"
                             image="ui-icon ui-icon-search"
                             actionListener="#{monmgtBean.findResourcesByUserAndType}"
                             ajax="false"/>
        </h:panelGroup>

        <h:panelGroup rendered="#{monmgtBean.showFormType ne 'ROLEGROUP_MEDICAL'}">
            <p:commandButton value="Display" rendered="#{monmgtBean.showFormType ne 'ROLEGROUP_MEDICAL'}"
                             title="Display"
                             image="ui-icon ui-icon-search"
                             actionListener="#{monmgtBean.findResourcesByUserAndType}"
                             ajax="false"/>
        </h:panelGroup>
    </h:panelGroup>
</h:form>


<p><p:spacer width="2"/></p>
<p:outputPanel rendered="#{monmgtBean.selectedOwnerGreetName ne null}">
    Health information for:<p:spacer width="2px"/> <h:outputLabel value="#{monmgtBean.selectedOwnerGreetName}"/>
</p:outputPanel>

<!--
<p>
    <h:outputLabel value="#{monmgtBean.selectedLocalResourceType}"/>
</p>
-->
<h:form prependId="false">

    <h:panelGroup id="pdq_1" layout="block" rendered="#{monmgtBean.selectedLocalResourceType eq 'PDQ'}">
        <h:panelGrid columns="2" id="idViewPcon">
            <f:facet  name="header">
                <h:commandLink>
                    <p:graphicImage value="/images/pdf.png"/>
                    <p:dataExporter type="pdf" target="pdq_1" fileName="phr_contactinfo"/>
                </h:commandLink>
            </f:facet>
            <h:outputLabel value="Family Name"/>
            <h:outputLabel value="#{monmgtBean.contactInfo.lastName}"/>

            <h:outputLabel value="First Name"/>
            <h:outputLabel value="#{monmgtBean.contactInfo.firstName}"/>

            <h:outputLabel value="Telephone"/>
            <h:outputLabel value="#{monmgtBean.contactInfo.primaryTelephone}"/>

            <h:outputLabel value="Street Address"/>
            <h:outputLabel value="#{monmgtBean.contactInfo.addressText}"/>

            <h:outputLabel value="Postal Code"/>
            <h:outputLabel value="#{monmgtBean.contactInfo.postalCode}"/>

            <h:outputLabel value="City"/>
            <h:outputLabel value="#{monmgtBean.contactInfo.city}"/>

            <h:outputLabel value="Country"/>
            <h:outputLabel value="#{monmgtBean.contactInfo.country}"/>

            <h:outputLabel value="Email"/>
            <h:outputLabel value="#{monmgtBean.contactInfo.email}"/>

            <h:outputLabel value="Internet Services"/>
            <h:panelGroup>
                <h:outputLabel value="Chat"/>
                <p:spacer width="2"/>
                <h:outputLabel value="#{monmgtBean.contactInfo.internetChatProvider}"/>
                <p:spacer width="2"/>
                <h:outputLabel value="#{monmgtBean.contactInfo.internetChatId}"/>
            </h:panelGroup>

         </h:panelGrid>

    </h:panelGroup>

    <h:panelGroup layout="block" rendered="#{monmgtBean.selectedLocalResourceType ne 'PDQ'}">
        <h:panelGrid columns="2">
            <p:panel header="Consulation Report">
                <h:commandLink>
                    <p:graphicImage value="/images/pdf.png"/>
                    <p:dataExporter type="pdf" target="tbl" fileName="phr_report_"/>
                </h:commandLink>
            </p:panel>

            <p:panel  header="Export Page Data">
                <h:commandLink>
                    <p:graphicImage value="/images/pdf.png"/>
                    <p:dataExporter type="pdf" target="tbl" fileName="phr_report_" pageOnly="true"/>
                </h:commandLink>

            </p:panel>
        </h:panelGrid>

        <p:dataTable widgetVar="widItemTableMonitor" id="tbl"
                     var="theItem" value="#{monmgtBean.modelMain}">

            <h:panelGroup rendered="#{monmgtBean.selectedLocalResourceType eq 'BP'}">

                <p:columnGroup type="header">

                    <p:row>
                        <p:column headerText="#{labels['labels.menu.options.label']}"/>
                        <p:column headerText="#{labels['short.date.label']}" sortBy="#{theItem.beginDate}"/>
                        <p:column headerText="#{labels['obsBloodPressureA01.label']}" sortBy="#{theItem.systolic}"/>
                        <p:column headerText="#{labels['obsBloodPressureA01.bpHeartRate.label']}"
                                  sortBy="#{theItem.heartRate}"/>
                        <p:column headerText="#{labels['default.comments.label']}"/>
                    </p:row>
                </p:columnGroup>

                <p:column>
                    <h:outputLabel value="#{theItem.beginDate}">
                        <f:convertDateTime pattern="yyyy-MM-dd"/>
                    </h:outputLabel>
                </p:column>

                <p:column style="text-align:center;">
                    <h:outputLabel value="#{theItem.systolic}"/>/<h:outputLabel value="#{theItem.diastolic}"/><h:outputLabel
                        value=" mmHg"/>
                </p:column>

                <p:column style="text-align:center;">
                    <h:outputLabel value="#{theItem.heartRate}"/> <h:outputLabel value=" bpm"/>
                </p:column>

                <p:column>
                    <h:outputText value="#{theItem.note}" rendered="#{monmgtBean.showFormType ne 'ROLEGROUP_MEDICAL'}"/>
                </p:column>

            </h:panelGroup>

            <h:panelGroup rendered="#{monmgtBean.selectedLocalResourceType eq 'BW'}">

                <p:column headerText="Date" sortBy="#{theItem.beginDate}">
                    <h:outputLabel value="#{theItem.beginDate}">
                        <f:convertDateTime pattern="yyyy-MM-dd"/>
                    </h:outputLabel>
                </p:column>

                <p:column headerText="#{labels['obsBodyWeightBMW01.label']}" sortBy="#{theItem.bodyWeight}">
                    <h:outputLabel value="#{theItem.bodyWeight}"/> kg
                </p:column>
                <p:column headerText="#{labels['obsBodyWeightBMW01.bodyBMI.label']}" sortBy="#{theItem.bmi}">
                    <h:outputLabel value="#{theItem.bmi}"/>
                </p:column>
                <p:column
                        headerText="#{labels['obsBodyWeightBMW01.height.label']}">
                    <h:outputLabel value="#{theItem.bodyHeight}"/> cm
                </p:column>

                <p:column>
                    <h:outputText value="#{theItem.note}" rendered="#{monmgtBean.showFormType ne 'ROLEGROUP_MEDICAL'}"/>
                </p:column>

            </h:panelGroup>

            <h:panelGroup rendered="#{monmgtBean.selectedLocalResourceType eq 'MED'}">

                <p:column headerText="#{labels['medicationSummary.medicationNameText.label']}">

                    <h:outputLabel value="#{theItem.label}"/>
                    <p:outputPanel rendered="#{theItem.code != null}">
                        <h:outputLabel value="#{theItem.code}" style="font-style:italic;"/>
                    </p:outputPanel>

                    <!--<h:graphicImage title="#{labels['imported_medical_data']}" alt="#{labels['imported_medical_data']}" id="image1"
                                              value="/images/imported.png" />style="font-style:italic;color:red;"	-->
                    <!--
                    <p:outputPanel rendered="#{theItem.originStatus eq 'PHRS_INTEROP.IMPORT'}"> <p:spacer width="1"/>
                        <h:outputLabel value="#{labels['imported_medical_data']}" />
                    </p:outputPanel>-->

                </p:column>
                <p:column headerText="Start Date">
                    <h:outputText value="#{theItem.beginDate}">
                        <f:convertDateTime pattern="yyyy-MM-dd"/>
                    </h:outputText>
                </p:column>

                <p:column headerText="Status" style="width:120px;">
                    <h:outputText value="#{theItem.status}">
                        <f:converter converterId="labelLookup"/>
                    </h:outputText>

                </p:column>

                <p:column headerText="End Date">
                    <h:outputText value="#{theItem.endDate}">
                        <f:convertDateTime pattern="yyyy-MM-dd"/>
                    </h:outputText>
                </p:column>


                <p:column headerText="#{labels['default.medicationDosage.label']}" style="width:150px;">
                    <h:outputLabel value="#{theItem.treatmentMatrix.dosage}"/>
                    <p:spacer width="2"/>
                    <h:outputLabel value="#{theItem.treatmentMatrix.dosageUnits}">
                        <f:converter converterId="labelLookup"/>
                    </h:outputLabel>
                    <br/>
                    <h:outputLabel value="#{theItem.treatmentMatrix.dosageInterval}">
                        <f:converter converterId="labelLookup"/>
                    </h:outputLabel>
                    <br/>
                    <h:outputLabel value="#{theItem.treatmentMatrix.dosageTimeOfDay}">
                        <f:converter converterId="labelLookup"/>
                    </h:outputLabel>
                </p:column>

                <p:column headerText="Reason">
                    <h:outputLabel value="#{theItem.reasonCode}">
                        <f:converter converterId="labelLookup"/>
                    </h:outputLabel>
                </p:column>

                <p:column headerText="Prescribed by">

                    <h:outputText value="#{theItem.prescribedByName}"/>
                </p:column>

                <p:column headerText="#{labels['default.comments.label']}"
                          rendered="#{monmgtBean.showFormType ne 'ROLEGROUP_MEDICAL'}">
                    <h:outputText value="#{theItem.note}"/>
                </p:column>

            </h:panelGroup>

            <h:panelGroup rendered="#{monmgtBean.selectedLocalResourceType eq 'ADL'}">

                <p:column headerText="#{labels['activityOfDailyLivingItem.activityCode.label']}">
                    <h:outputLabel value="#{theItem.code}">
                        <f:converter converterId="labelLookup"/>
                    </h:outputLabel>
                </p:column>


                <p:column styleClass="innertable" headerText="#{labels['activityOfDailyLivingItem.valueActivity.label']}">
                    <h:outputLabel value="#{theItem.status}">
                        <f:converter converterId="labelLookup"/>
                    </h:outputLabel>
                </p:column>

                <p:column headerText="#{labels['default.comments.label']}"
                          rendered="#{monmgtBean.showFormType ne 'ROLEGROUP_MEDICAL'}">
                    <h:outputText value="#{theItem.note}"/>
                </p:column>

            </h:panelGroup>

            <h:panelGroup rendered="#{monmgtBean.selectedLocalResourceType eq 'PROBLEM'}">
                <p:column headerText="#{labels['obsIssue.issueCode.label']}" sortBy="#{theItem.code}">
                    <h:outputLabel value="#{theItem.code}">
                        <f:converter converterId="labelLookup"/>
                    </h:outputLabel>
                </p:column>

                <p:column headerText="#{labels['default_status_problem']}" sortBy="#{theItem.status}">
                    <h:outputLabel value="#{theItem.status}">
                        <f:converter converterId="labelLookup"/>
                    </h:outputLabel>
                </p:column>

                <p:column headerText="#{labels['short.date.label']}" sortBy="#{theItem.displayDate}">
                    <h:outputLabel value="#{theItem.displayDate}">
                        <f:convertDateTime pattern="yyyy-MM-dd"/>
                    </h:outputLabel>
                </p:column>

                <p:column headerText="#{labels['default.comments.label']}"
                          rendered="#{monmgtBean.showFormType ne 'ROLEGROUP_MEDICAL'}">
                    <h:outputText value="#{theItem.note}"/>
                </p:column>

            </h:panelGroup>
        </p:dataTable>
      <!-- for xsl need apache poi 3.2-FINAL -->

    </h:panelGroup>
</h:form>

</p:fieldset>
</ui:define>

</ui:composition>