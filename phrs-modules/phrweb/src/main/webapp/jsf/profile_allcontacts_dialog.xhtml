<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.prime.com.tr/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
	<title></title>
</h:head>

<h:body>

	<ui:composition>

<!-- 

	Date birthdate
	 primaryLanguage
	
	//role identifiers from vocabulary or system definition
	// used for patient healthcare_user, healthcare_provider

	Boolean activeStatus
	//TODO replace activeStatus with statusCode in radio buttons
	
	statusCode
	
	addressText
	postalCode
	city
	country
	
	primaryTelephone
	
	internetChatProvider internetChatId
	internetVoiceProvider internetVoiceId
	website
	

	 -->
		<p:dialog closable="false"  header="#{labels['contactInfo.label']}"
			widgetVar="widDialogAcontacts" 
			id="idDialogAcontacts" 
			modal="true"	appendToBody="true"
			width="600" 
			showEffect="clip"
			hideEffect="clip">

			<p:outputPanel id="idPanelAcontacts" layout="block">
			<!--  
			contact type=<h:outputLabel value="#{allcontacts.selected.contactType}"/><br/>
			allcontacts.modify=<h:outputLabel value="#{allcontacts.modify}"/><br/>
			allcontacts.modify=<h:outputLabel value="#{allcontacts.modify}"/><br/>
			contactTypeMedical=<h:outputLabel value="#{allcontacts.contactTypeMedical}"/>
			<br/>-->
				<h:form id="idFormAcontacts">
					<h:inputHidden value="#{allcontacts.selected.resourceUri}" />			
					<h:inputHidden value="#{allcontacts.selected.tempCreateDate}" />
					<h:inputHidden value="#{allcontacts.selected.tempId}" />

	
					<h:inputHidden value="#{allcontacts.selected.createId}" />
					
					<h:inputHidden value="#{allcontacts.selected.status}" /> 
					<h:inputHidden value="#{allcontacts.selected.code}" />
					<h:inputHidden value="#{allcontacts.selected.label}" /> 
				<!-- 
					issue:begin and end date when only the display data is used...only one saved
					-->
				
					<h:inputHidden value="#{allcontacts.selected.type}" />
					<h:inputHidden value="#{allcontacts.selected.category}" />
					<h:inputHidden value="#{allcontacts.selected.externalReference}" />
					
					
					<h:inputHidden value="#{allcontacts.selected.creatorUri}" />
					<h:inputHidden value="#{allcontacts.selected.ownerUri}" />					
					<h:inputHidden value="#{allcontacts.selected.parentId}" />
					<h:inputHidden value="#{allcontacts.selected.deleted}" />
					
					
					<h:inputHidden value="#{allcontacts.selected.origin}" />
					<h:inputHidden value="#{allcontacts.selected.originStatus}" />

                    <h:inputHidden value="#{allcontacts.selected.birthdate}" />
                    <!--
                    Not relevant
                    <h:inputHidden value="#{allcontacts.selected.pixQueryIdType}" />

                    <h:inputHidden value="#{allcontacts.selected.pixQueryIdUser}" />
                     -->
                    <h:panelGrid columns="2" cellpadding="4" style="margin:0 auto;">
                        <f:facet name="header">
                            <p:commandButton value="#{labels['default.button.create.label']}"
                                             title="#{labels['default.button.create.label']}"
                                             process="idFormAcontacts"
                                             update="msgs idFormAcontacts idItemTableAcontacts"
                                             oncomplete="onEditComplete(xhr,status,args)"
                                             actionListener="#{allcontacts.store}" image="ui-icon ui-icon-check" />

                            <!-- p:commandButton type="reset"
                                       value="#{allcontacts.modify eq 'yes' ? labels['default.button.reset.label'] : labels['default.button.close.label']}"
                                       onclick="widDialogAcontacts.hide();" immediate="true"
                                       image="ui-icon ui-icon-close" />-->

                            <p:commandButton rendered="#{allcontacts.modify eq 'yes'}"
                                             value="#{labels['default.button.reset.label']}"
                                             actionListener="#{allcontacts.refresh}" immediate="true"
                                             onsuccess="widDialogAcontacts.hide()"
                                             image="ui-icon ui-icon-close" />

                            <p:commandButton  rendered="#{allcontacts.modify eq 'no'}"
                                              value="#{labels['default.button.close.label']}"
                                              reset="true"
                                              onsuccess="widDialogAcontacts.hide()"
                                              image="ui-icon ui-icon-close" />
                        </f:facet>
                    </h:panelGrid>


                    <h:panelGrid columns="3">
   <!--
                    <h:outputLabel for="field_identifier_cied"
                                   value="CIED Serial Number"
                                   styleClass="form-dialog-label" />

                    <p:outputPanel id="field_identifier_cied" layout="block">
                        <h:outputLabel value="#{allcontacts.selected.pixQueryIdType}"
                                       rendered="#{allcontacts.modify eq 'no'}" />
                        <h:selectOneMenu value=" {allcontacts.selected.pixQueryIdType}"
                                         id="field_pixQueryIdType_input"
                                         rendered="#{allcontacts.modify eq 'yes'}">
                            <f:selectItem itemLabel="model:Maximo"
                                          itemValue="cied:model:Maximo" noSelectionOption="true"/>
                            <f:selectItem itemLabel="Patient ID"
                                          itemValue="pid"/>
                        </h:selectOneMenu>

                        <h:outputLabel value="#{allcontacts.selected.pixQueryIdUser}"
                                       rendered="#{allcontacts.modify eq 'no'}" />
                        <p:inputText value="#{allcontacts.selected.pixQueryIdUser}"
                                     id="field_identifier_cied_input"
                                     required="true" requiredMessage="#{labels['default_required_field']}"
                                     rendered="#{allcontacts.modify eq 'yes'}" />
                    </p:outputPanel>
                    <p:message for="field_identifier_cied_input" display="text" />
  -->

										
						<h:outputLabel for="field_firstName"
							value="First Name"
							styleClass="form-dialog-label" />
						<p:outputPanel id="field_firstName" layout="block">
							<h:outputLabel value="#{allcontacts.selected.firstName}"
								rendered="#{allcontacts.modify eq 'no'}" />
							<p:inputText value="#{allcontacts.selected.firstName}" 
								id="firstName_input"
								required="true" requiredMessage="#{labels['default_required_field']}"
								rendered="#{allcontacts.modify eq 'yes'}" />
						</p:outputPanel>
						<p:message for="firstName_input" display="text" />

						<h:outputLabel for="field_lastName"
							value="Last Name"
							styleClass="form-dialog-label" />
						<p:outputPanel id="field_lastName" layout="block">
							<h:outputLabel value="#{allcontacts.selected.lastName}"
								rendered="#{allcontacts.modify eq 'no'}" />
							<p:inputText value="#{allcontacts.selected.lastName}" 
								id="lastName_input"
								required="true" requiredMessage="#{labels['default_required_field']}"
								rendered="#{allcontacts.modify eq 'yes'}" />
						</p:outputPanel>
						<p:message for="lastName_input" display="text" />

						<h:outputLabel for="field_primaryphone"
							value="Primary Telephone"
							styleClass="form-dialog-label" />
						<p:outputPanel id="field_primaryphone" layout="block">
							<h:outputLabel value="#{allcontacts.selected.primaryTelephone}"
								rendered="#{allcontacts.modify eq 'no'}" />
							<p:inputText value="#{allcontacts.selected.primaryTelephone}" 
								id="primaryphone_input"
								rendered="#{allcontacts.modify eq 'yes'}" />
						</p:outputPanel>
						<p:message for="primaryphone_input" display="text" />
						
						<h:outputLabel for="field_email"
							value="E-Mail"
							styleClass="form-dialog-label" />
						<p:outputPanel id="field_email" layout="block">
							<h:outputLabel value="#{allcontacts.selected.email}"
								rendered="#{allcontacts.modify eq 'no'}" />
							<p:inputText value="#{allcontacts.selected.email}" 
								id="email_input"
								rendered="#{allcontacts.modify eq 'yes'}" />
						</p:outputPanel>
						<p:message for="email_input" display="text" />	
											
						<h:outputLabel for="field_org"
							value="Organization"
							styleClass="form-dialog-label" />
						<p:outputPanel id="field_org" layout="block">
							<h:outputLabel value="#{allcontacts.selected.organization}"
								rendered="#{allcontacts.modify eq 'no'}" />
							<p:inputText value="#{allcontacts.selected.organization}" 
								id="field_org_input" 
								rendered="#{allcontacts.modify eq 'yes'}" />
						</p:outputPanel>
						<p:message for="field_org_input" display="text" />							
						
						<h:outputLabel for="field_role"
							value="Healthcare Role"
							styleClass="form-dialog-label" />
<!--  
render="#{allcontacts.selected.contactType eq 'healthcare_user'}"
TAG_ROLES_NON_MEDICAL_USER 
render="#{allcontacts.selected.contactType eq  'healthcare_provider'}

-->							
						<p:outputPanel id="field_role" layout="block" >
							<h:outputLabel value="#{allcontacts.selected.healthcareRole}"
								rendered="#{allcontacts.modify eq 'no'}">
								<f:converter converterId="labelLookup" />
							</h:outputLabel>
							<h:selectOneMenu value="#{allcontacts.selected.healthcareRole}" 
								id="field_role_input"
								rendered="#{allcontacts.modify eq 'yes' }">
								<f:selectItems
									value="#{allcontacts.vocabMap.TAG_ROLES_MEDICAL_PROFESSIONAL}" var="lv"
									itemLabel="#{lv.label}" itemValue="#{lv.id}" />
							</h:selectOneMenu>
						</p:outputPanel>
						<p:message for="field_role_input" display="text"  />
	
 <!-- 	remove...								
						<h:outputLabel value="Birth Date" 
							render="#{allcontacts.selected.contactType eq 'healthcare_user'}" 
							for="birthDateField" styleClass="form-dialog-label" />
						<p:outputPanel id="birthDateField" layout="block" 
							render="#{allcontacts.selected.contactType eq 'healthcare_user'}">
							<h:outputLabel value="#{allcontacts.selected.birthdate}"
								rendered="#{allcontacts.modify eq 'no'}">
								<f:convertDateTime pattern="dd.MM.yyyy" />
							</h:outputLabel>
							<p:inputMask mask="99.99.9999"
								id="birthdateDateField_input"
								value="#{allcontacts.selected.birthdate}"
								rendered="#{allcontacts.modify eq 'yes'}">
								<f:convertDateTime pattern="dd.MM.yyyy" />
							</p:inputMask>
						</p:outputPanel>					
						<p:message for="birthdateDateField_input" display="text" render="#{allcontacts.selected.contactType eq 'healthcare_user'}"/> 
	 -->

						<h:outputLabel for="field_2"
							value="Street Address"
							styleClass="form-dialog-label" />
						<p:outputPanel id="field_2" layout="block">					
							<h:outputText value="#{allcontacts.selected.addressText}"
								rendered="#{allcontacts.modify eq 'no'}" />								
							<p:inputTextarea value="#{allcontacts.selected.addressText}" 
								id="field_2_input"
								autoResize="false" cols="30" rows="2"
								rendered="#{allcontacts.modify eq 'yes'}" />
						</p:outputPanel>
						<p:message for="field_2_input" display="text" />

                    <h:outputLabel for="address_segment"
                                   value=" "
                                   styleClass="form-dialog-label" />
     <h:panelGrid id="address_segment" columns="3" cellpadding="4" style="margin:0 auto;">
						<h:outputLabel
							value="Postal Code"
							styleClass="form-dialog-label" />
                         <h:outputLabel
                            value="City"
                            styleClass="form-dialog-label" />
                         <h:outputLabel
                        value="Country"
                        styleClass="form-dialog-label" />

						<p:outputPanel id="field_3" layout="block">
							<h:outputLabel value="#{allcontacts.selected.postalCode}"
								rendered="#{allcontacts.modify eq 'no'}" />
							<p:inputText value="#{allcontacts.selected.postalCode}" 
								id="field_3_input"
								rendered="#{allcontacts.modify eq 'yes'}" />
						</p:outputPanel>

						<p:outputPanel id="field_4" layout="block">
							<h:outputLabel value="#{allcontacts.selected.city}"
								rendered="#{allcontacts.modify eq 'no'}" />
							<p:inputText value="#{allcontacts.selected.city}" 
								id="field_4_input"
								rendered="#{allcontacts.modify eq 'yes'}" />
						</p:outputPanel>


						<p:outputPanel id="field_5" layout="block">
							<h:outputLabel value="#{allcontacts.selected.country}"
								rendered="#{allcontacts.modify eq 'no'}" />
							<p:inputText value="#{allcontacts.selected.country}" 
								id="field_5_input"
								rendered="#{allcontacts.modify eq 'yes'}" />
						</p:outputPanel>

    </h:panelGrid>
     <p:message for="address_segment" display="text" />
						<h:outputLabel for="field_internetChatProvider" render="#{allcontacts.selected.contactType eq 'healthcare_user'}"
							value="Internet Chat Service"
							styleClass="form-dialog-label" />							
						<p:outputPanel id="field_internetChatProvider" layout="block" render="#{allcontacts.selected.contactType eq 'healthcare_user'}" >
							<h:outputLabel value="#{allcontacts.selected.internetChatProvider}"
								rendered="#{allcontacts.modify eq 'no'}">
							</h:outputLabel>
							<h:selectOneMenu value="#{allcontacts.selected.internetChatProvider}"
								id="field_internetChatProvider_input"
								rendered="#{allcontacts.modify eq 'yes'}">
										<f:selectItem itemLabel="Google"
											itemValue="Google"/>
										<f:selectItem itemLabel="Skype"
											itemValue="Skype"/>
										<f:selectItem itemLabel="Other"
											itemValue="Other"/>
							</h:selectOneMenu>	
							<p:inputText value="#{allcontacts.selected.internetChatId}" 
								id="internetChatId_input"
								rendered="#{allcontacts.modify eq 'yes'}" />						
						</p:outputPanel>
						<p:message for="internetChatId_input" display="text" render="#{allcontacts.selected.contactType eq 'healthcare_user'}"/>
  <!--
						<h:outputLabel for="field_internetVoiceProvider" render=" {allcontacts.selected.contactType eq 'healthcare_user'}"
							value="Internet Voice Service"
							styleClass="form-dialog-label" />							
						<p:outputPanel id="field_internetVoiceProvider" layout="block" render=" {allcontacts.selected.contactType eq 'healthcare_user'}">
							<h:outputLabel value="#{allcontacts.selected.internetVoiceProvider}"
								rendered="#{allcontacts.modify eq 'no'}">
							</h:outputLabel>
							<h:selectOneMenu value=" {allcontacts.selected.internetVoiceProvider}"
								id="field_internetVoiceProvider_input"
								rendered="#{allcontacts.modify eq 'yes'}">
										<f:selectItem itemLabel="Google"
											itemValue="Google" noSelectionOption="true"></f:selectItem>
										<f:selectItem itemLabel="Skype"
											itemValue="Skype"></f:selectItem>
										<f:selectItem itemLabel="Other"
											itemValue="Other"></f:selectItem>
							</h:selectOneMenu>		
							<p:inputText value="#{allcontacts.selected.internetVoiceId}" 
								id="internetVoiceId_input"
								rendered="#{allcontacts.modify eq 'yes'}" />			
						</p:outputPanel>
						<p:message for="internetVoiceId_input" display="text" render=" {allcontacts.selected.contactType eq 'healthcare_user'}" />
 -->
						<h:outputLabel for="field_note_contact"
							value="#{labels['default.comments.label']}"
							styleClass="form-dialog-label" />
						<p:outputPanel id="field_note_contact" layout="block">
							<h:outputText value="#{allcontacts.selected.note}"
								rendered="#{allcontacts.modify eq 'no'}" styleClass="commentText" />
							<p:inputTextarea value="#{allcontacts.selected.note}" 
								id="field_note_contact_input"
								autoResize="false" cols="30" rows="5"  
								rendered="#{allcontacts.modify eq 'yes'}" label="#{labels['default.comments.label']}"
								styleClass="commentTextInputArea" />
						</p:outputPanel>
						<p:message for="field_note_contact_input" display="text" />
					</h:panelGrid>


				</h:form>
			</p:outputPanel>
		</p:dialog>

	</ui:composition>
</h:body>

</html>
